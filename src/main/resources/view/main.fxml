<?xml version="1.0" encoding="UTF-8"?>
<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.paint.Color?>
<?import javafx.scene.shape.Circle?>
<?import javafx.scene.text.Font?>
<?import javafx.scene.control.Menu?>
<?import javafx.scene.control.MenuBar?>
<?import javafx.scene.control.MenuItem?>

<VBox fx:id="mainContainer" xmlns="http://javafx.com/javafx/21" xmlns:fx="http://javafx.com/fxml/1"
      fx:controller="com.calcifer.controller.MainController" spacing="15"
      style="-fx-background-color: #f5f7fa; -fx-padding: 20; -fx-font-family: 'Segoe UI';">

    <!-- 菜单栏 -->


    <HBox alignment="CENTER_LEFT" spacing="20">
        <!-- 连接状态指示灯 -->
        <HBox alignment="CENTER_LEFT" spacing="5">
            <Label text="设备连接:" style="-fx-font-weight: bold;"/>
            <Circle fx:id="statusLight" radius="8" fill="#e74c3c" stroke="#bdc3c7" strokeWidth="1"/>
            <Label fx:id="statusLabel" text="Disconnected" style="-fx-text-fill: #7f8c8d;"/>
        </HBox>

        <!-- 完成状态指示灯 -->
        <HBox alignment="CENTER_LEFT" spacing="5">
            <Label text="完成:" style="-fx-font-weight: bold;"/>
            <Circle fx:id="completionLight" radius="8" fill="gray" stroke="#bdc3c7" strokeWidth="1"/>
        </HBox>
    </HBox>

    <!-- 控制面板 -->
    <HBox fx:id="controlBox" spacing="15" alignment="CENTER_LEFT" style="-fx-background-color: #f5f7fa; -fx-background-radius: 5; -fx-padding: 10;">
        <Button fx:id="checkAllButton" text="开始检查"
                style="-fx-font-weight: bold; -fx-background-color: #3498db; -fx-text-fill: white; -fx-background-radius: 3;"
                onAction="#handleCheckAll" disable="true"/>

        <Button fx:id="continueButton" text="继续"
                style="-fx-font-weight: bold; -fx-background-color: #2ecc71; -fx-text-fill: white; -fx-background-radius: 3;"
                onAction="#handleContinue" disable="true"/>

        <Button fx:id="stopAllButton" text="暂停"
                style="-fx-font-weight: bold; -fx-background-color: #e74c3c; -fx-text-fill: white; -fx-background-radius: 3;"
                onAction="#handleStopAll" disable="true"/>

        <Label fx:id="categoryLabel" text="分类:" style="-fx-font-weight: bold;"/>
        <ComboBox fx:id="categoryFilter" promptText="全部分类" prefWidth="150" style="-fx-background-radius: 3;"/>

        <Button fx:id="checkCategoryButton" text="分类检查"
                style="-fx-font-weight: bold; -fx-background-color: #3498db; -fx-text-fill: white; -fx-background-radius: 3;"
                onAction="#handleCheckByCategory" disable="true"/>

        <Label fx:id="statusFilterLabel" text="状态:" style="-fx-font-weight: bold;"/>
        <ComboBox fx:id="statusFilter" promptText="All Status" prefWidth="100" style="-fx-background-radius: 3;"/>

        <Label fx:id="searchLabel" text="搜索:" style="-fx-font-weight: bold;"/>
        <TextField fx:id="searchField" promptText="检查项或类别" prefWidth="200" style="-fx-background-radius: 3;"/>

        <!-- 替换主题切换按钮为历史记录和导出按钮 -->
<!--        <Button fx:id="historyButton" text="历史记录" disabled="true"-->
<!--                style="-fx-font-weight: bold; -fx-background-color: #9b59b6; -fx-text-fill: white; -fx-background-radius: 3;"-->
<!--                onAction="#showHistoryView"/>-->

        <Button fx:id="exportButton" text="导出结果"
                style="-fx-font-weight: bold; -fx-background-color: #2ecc71; -fx-text-fill: white; -fx-background-radius: 3;"
                onAction="#exportResults"/>
    </HBox>

    <!-- 使用SplitPane分隔检查区和详情区 -->
    <SplitPane fx:id="mainSplitPane" orientation="VERTICAL" VBox.vgrow="ALWAYS">
        <!-- 结果表格 -->
        <TableView fx:id="resultTable" style="-fx-background-radius: 5; -fx-effect: dropshadow(three-pass-box, rgba(0,0,0,0.1), 5, 0, 0, 0);">
            <columns>
                <TableColumn fx:id="indexColumn" text="#" sortable="true" resizable="false"/>
                <TableColumn fx:id="categoryColumn" text="分类" resizable="false"/>
                <TableColumn fx:id="itemNameColumn" text="检查项" resizable="false"/>
                <TableColumn fx:id="versionColumn" text="版本" resizable="false"/>
                <TableColumn fx:id="prerequisiteColumn" text="前提" resizable="false"/>
                <TableColumn fx:id="propertyColumn" text="ADB 命令" resizable="false"/>
                <TableColumn fx:id="expectedColumn" text="期待值" resizable="false"/>
                <TableColumn fx:id="resultColumn" text="结果值" resizable="false"/>
                <TableColumn fx:id="statusColumn" text="状态" sortable="true" resizable="false"/>
                <TableColumn fx:id="noteColumn" text="备注" resizable="false"/>
                <TableColumn fx:id="actionColumn" text="执行" resizable="false"/>
            </columns>
        </TableView>

        <!-- 详情显示区域 -->
        <VBox fx:id="detailBox" style="-fx-background-color: #ffffff; -fx-border-color: #bdc3c7; -fx-border-radius: 5; -fx-padding: 5; -fx-spacing: 5;" minHeight="0" maxHeight="-Infinity" VBox.vgrow="NEVER">
            <ScrollPane fitToWidth="true" hbarPolicy="NEVER" vbarPolicy="AS_NEEDED">
            <!-- 横向布局的详情内容 -->
            <GridPane hgap="10" vgap="10" style="-fx-padding: 10;">
                <columnConstraints>
                    <ColumnConstraints halignment="RIGHT" minWidth="120" prefWidth="150"/>
                    <ColumnConstraints halignment="LEFT" minWidth="200" prefWidth="250" hgrow="ALWAYS"/>
                    <ColumnConstraints halignment="LEFT" minWidth="50" prefWidth="80"/>
                    <ColumnConstraints halignment="LEFT" minWidth="200" prefWidth="250" hgrow="ALWAYS"/>
                </columnConstraints>

                <Label text="序号:" GridPane.rowIndex="0" GridPane.columnIndex="0" style="-fx-font-weight: bold;"/>
                <Label fx:id="detailIndex" GridPane.rowIndex="0" GridPane.columnIndex="1" wrapText="true" maxWidth="380"/>

                <Label text="分类:" GridPane.rowIndex="0" GridPane.columnIndex="2" style="-fx-font-weight: bold;"/>
                <Label fx:id="detailCategory" GridPane.rowIndex="0" GridPane.columnIndex="3" wrapText="true" maxWidth="380"/>

                <Label text="检查项:" GridPane.rowIndex="1" GridPane.columnIndex="0" style="-fx-font-weight: bold;"/>
                <Label fx:id="detailItemName" GridPane.rowIndex="1" GridPane.columnIndex="1" wrapText="true" maxWidth="380"/>

                <Label text="版本:" GridPane.rowIndex="1" GridPane.columnIndex="2" style="-fx-font-weight: bold;"/>
                <Label fx:id="detailVersion" GridPane.rowIndex="1" GridPane.columnIndex="3" wrapText="true" maxWidth="380"/>

                <Label text="前提:" GridPane.rowIndex="2" GridPane.columnIndex="0" style="-fx-font-weight: bold;"/>
                <Label fx:id="detailPrerequisite" GridPane.rowIndex="2" GridPane.columnIndex="1" wrapText="true" maxWidth="380"/>

                <Label text="ADB 命令:" GridPane.rowIndex="2" GridPane.columnIndex="2" style="-fx-font-weight: bold;"/>
                <Label fx:id="detailProperty" GridPane.rowIndex="2" GridPane.columnIndex="3" wrapText="true" maxWidth="380"/>

                <Label text="期待值:" GridPane.rowIndex="3" GridPane.columnIndex="0" style="-fx-font-weight: bold;"/>
                <Label fx:id="detailExpected" GridPane.rowIndex="3" GridPane.columnIndex="1" wrapText="true" maxWidth="380"/>

                <Label text="结果值:" GridPane.rowIndex="3" GridPane.columnIndex="2" style="-fx-font-weight: bold;"/>
                <Label fx:id="detailResultValue" GridPane.rowIndex="3" GridPane.columnIndex="3" wrapText="true" maxWidth="380"/>

                <Label text="状态:" GridPane.rowIndex="4" GridPane.columnIndex="0" style="-fx-font-weight: bold;"/>
                <Label fx:id="detailStatus" GridPane.rowIndex="4" GridPane.columnIndex="1" wrapText="true" maxWidth="380"/>

                <Label text="备注:" GridPane.rowIndex="4" GridPane.columnIndex="2" style="-fx-font-weight: bold;"/>
                <Label fx:id="detailNote" GridPane.rowIndex="4" GridPane.columnIndex="3" wrapText="true" maxWidth="380"/>
            </GridPane>
            </ScrollPane>
        </VBox>
    </SplitPane>

    <!-- 状态栏 -->
    <HBox style="-fx-background-color: #34495e; -fx-padding: 5; -fx-background-radius: 3;">
        <Label fx:id="summaryLabel" text="Ready" style="-fx-text-fill: white;"/>
    </HBox>
</VBox>